<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>ADRIA API · ADRIA Documentation</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="ADRIA Documentation logo"/></a><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">ADRIA.jl Documentation</a></li><li><a class="tocitem" href="../synopsis/">Synopsis</a></li><li><span class="tocitem">Usage</span><ul><li><a class="tocitem" href="../usage/getting_started/">Getting Started</a></li><li><a class="tocitem" href="../usage/domain/">Loading a Domain</a></li><li><a class="tocitem" href="../usage/scenario_generation/">Generating scenarios</a></li><li><a class="tocitem" href="../usage/scenario_runs/">Running scenarios</a></li><li><a class="tocitem" href="../usage/analysis/">Analysis</a></li></ul></li><li><a class="tocitem" href="../dMCDA/">Dynamic Multi-Criteria Decision Analysis</a></li><li><span class="tocitem">Development</span><ul><li><a class="tocitem" href="../development/development_setup/">Development setup</a></li><li><a class="tocitem" href="../development/architecture/">ADRIA Architecture</a></li><li><a class="tocitem" href="../development/metrics/">Contributing a metric</a></li><li><a class="tocitem" href="../development/release_guide/">Release Guide</a></li><li><a class="tocitem" href="../development/building_docs/">Building Documentation</a></li></ul></li><li class="is-active"><a class="tocitem" href>ADRIA API</a><ul class="internal"><li><a class="tocitem" href="#Metrics"><span>Metrics</span></a></li><li><a class="tocitem" href="#Performance-indicators"><span>Performance indicators</span></a></li><li><a class="tocitem" href="#Sensitivity"><span>Sensitivity</span></a></li><li><a class="tocitem" href="#General-API"><span>General API</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>ADRIA API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>ADRIA API</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/open-AIMS/ADRIA.jl/blob/main/docs/src/API.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="ADRIA-API"><a class="docs-heading-anchor" href="#ADRIA-API">ADRIA API</a><a id="ADRIA-API-1"></a><a class="docs-heading-anchor-permalink" href="#ADRIA-API" title="Permalink"></a></h1><h2 id="Metrics"><a class="docs-heading-anchor" href="#Metrics">Metrics</a><a id="Metrics-1"></a><a class="docs-heading-anchor-permalink" href="#Metrics" title="Permalink"></a></h2><h2 id="Performance-indicators"><a class="docs-heading-anchor" href="#Performance-indicators">Performance indicators</a><a id="Performance-indicators-1"></a><a class="docs-heading-anchor-permalink" href="#Performance-indicators" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="ADRIA.performance.RMSE-Tuple{Any, Any}" href="#ADRIA.performance.RMSE-Tuple{Any, Any}"><code>ADRIA.performance.RMSE</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Root Mean Square Error</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/metrics/performance.jl#L21">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.performance.environmental_diversity-Tuple{Any, Any}" href="#ADRIA.performance.environmental_diversity-Tuple{Any, Any}"><code>ADRIA.performance.environmental_diversity</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">environmental_diversity(ms, inputs_i)</code></pre><p>Obtain an indication of environmental factor diversity for a scenario set. Higher values indicate a greater of mix of environmental conditions were experienced between scenarios.</p><p>This is referred to as <span>$E$</span>.</p><p><strong>Arguments</strong></p><ul><li>ms : model spec</li><li>inputs_i : inputs used for scenarios of interest</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/metrics/performance.jl#L156-L168">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.performance.gmd-Tuple{AbstractVector{&lt;:Real}}" href="#ADRIA.performance.gmd-Tuple{AbstractVector{&lt;:Real}}"><code>ADRIA.performance.gmd</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">gmd(vals::AbstractVector{&lt;:Real})::Float64
gmd(vals::AbstractMatrix{&lt;:Real})</code></pre><p>Gini&#39;s Mean Difference.</p><p>The absolute mean of all pairwise distances between elements in a given set.</p><p><strong>References</strong></p><ol><li><p>La Haye, R., &amp; Zizler, P. (2019).  The Gini mean difference and variance.  METRON, 77(1), 43-52.  https://doi.org/10.1007/s40300-019-00149-2</p></li><li><p>Yitzhaki, S. (2003).  Gini&#39;s Mean difference: A superior measure of variability for non-normal   distributions.  Metron - International Journal of Statistics, LXI(2), 285-316. https://ideas.repec.org/a/mtn/ancoec/030208.html</p></li><li><p>Kashif, M., Aslam, M., Al-Marshadi, A. H., &amp; Jun, C.-H. (2016). Capability Indices for Non-Normal Distribution Using Gini&#39;s Mean Difference as Measure of Variability.  IEEE Access, 4, 7322-7330. https://doi.org/10.1109/ACCESS.2016.2620241</p></li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/metrics/performance.jl#L35-L59">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.performance.intervention_diversity-Tuple{Any, Any}" href="#ADRIA.performance.intervention_diversity-Tuple{Any, Any}"><code>ADRIA.performance.intervention_diversity</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">intervention_diversity(ms, inputs_i)</code></pre><p>Obtain an indication of intervention diversity for a scenario. Higher values indicate a greater of mix of interventions options were applied.</p><p>This is referred to as <span>$D$</span>.</p><p><strong>Arguments</strong></p><ul><li>ms : model spec</li><li>inputs_i : inputs used for scenarios of interest</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/metrics/performance.jl#L139-L150">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.performance.intervention_effort-Tuple{Any, Any, Any}" href="#ADRIA.performance.intervention_effort-Tuple{Any, Any, Any}"><code>ADRIA.performance.intervention_effort</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">intervention_effort(ms, inputs_i)</code></pre><p>Obtain an indication of intervention effort for each scenario and intervention type. This is referred to as <span>$F$</span>.</p><p><strong>Arguments</strong></p><ul><li>ms : model spec</li><li>inputs_i : inputs used for scenarios of interest</li></ul><p><strong>Returns</strong></p><p>Matrix of <code>s * 6</code>, where <code>s</code> is the number of scenarios and columns are: <code>seed_TA</code>, <code>seed_CA</code>, <code>fogging</code>, <code>SRM</code>, <code>seed_years</code>, <code>shade_years</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/metrics/performance.jl#L108-L121">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.performance.normalize-Tuple{AbstractArray{&lt;:Real}}" href="#ADRIA.performance.normalize-Tuple{AbstractArray{&lt;:Real}}"><code>ADRIA.performance.normalize</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">normalize(vals::AbstractArray{&lt;:Real})</code></pre><p>Normalize values using feature scaling such that values are bound between 0 and 1, where 1 is equivalent to the maximum value found.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/metrics/performance.jl#L7-L12">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.performance.probability-Tuple{AbstractArray{&lt;:Real}}" href="#ADRIA.performance.probability-Tuple{AbstractArray{&lt;:Real}}"><code>ADRIA.performance.probability</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">probability(vals::AbstractArray{&lt;:Real})</code></pre><p>Calculate probability of individual trajectories, given a scenario ensemble <span>$S$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/metrics/performance.jl#L25-L29">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.performance.temporal_variability-Tuple{AbstractVector{&lt;:Real}}" href="#ADRIA.performance.temporal_variability-Tuple{AbstractVector{&lt;:Real}}"><code>ADRIA.performance.temporal_variability</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">temporal_variability(x::AbstractVector{&lt;:Real})
temporal_variability(x::AbstractArray{&lt;:Real, 2})
temporal_variability(x::AbstractArray{&lt;:Real}, func_or_data...)</code></pre><p>The V meta-metric.</p><p>As a meta-metric, it can be applied to any combination of metrics (including itself), assuming <span>$x$</span> is bound between 0 and 1. If this is not the case, consider normalizing values first.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs"># Apply V to a time series
julia&gt; temporal_variability(rand(50))

# Apply V to an ensemble of of time series
julia&gt; x = rand(50, 200)
julia&gt; temporal_variability(x)

# Create and apply a modified V metric to an ensemble of of time series.
# Where the argument is an array and not a function, the data is used directly
# and so it is assumed all matrices are of the same size and shape.
julia&gt; temporal_variability(x, temporal_variabilty, temporal_variability(P(x)))
julia&gt; temporal_variability(x, temporal_variabilty, P(x), D(x), E(x))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/metrics/performance.jl#L70-L96">source</a></section></article><h2 id="Sensitivity"><a class="docs-heading-anchor" href="#Sensitivity">Sensitivity</a><a id="Sensitivity-1"></a><a class="docs-heading-anchor-permalink" href="#Sensitivity" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="ADRIA.sensitivity.ks_statistic-Tuple{Any}" href="#ADRIA.sensitivity.ks_statistic-Tuple{Any}"><code>ADRIA.sensitivity.ks_statistic</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ks_statistic(ks)</code></pre><p>Calculate the Kolmogorov-Smirnov test statistic.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/analysis/sensitivity.jl#L10-L14">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.sensitivity.outcome_map-Union{Tuple{T}, Tuple{DataFrames.DataFrame, AbstractVecOrMat{T}, Any, Vector}} where T&lt;:Real" href="#ADRIA.sensitivity.outcome_map-Union{Tuple{T}, Tuple{DataFrames.DataFrame, AbstractVecOrMat{T}, Any, Vector}} where T&lt;:Real"><code>ADRIA.sensitivity.outcome_map</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">outcome_map(X::DataFrame, y::AbstractVecOrMat, rule, target_factors::Vector; S::Int=20, n_boot::Int=100, conf::Float64=0.95)::NamedArray</code></pre><p>Map normalized outcomes (defined by <code>rule</code>) to factor values discretized into <code>S</code> bins.</p><p>Produces a matrix indicating the range of (normalized) outcomes across factor space for each dimension (the model inputs). This is similar to a Regional Sensitivity Analysis, except that the model outputs are examined directly as opposed to a measure of sensitivity.</p><p>Note:</p><ul><li><code>y</code> is normalized on a per-column basis prior to the analysis</li><li>Empty areas of factor space (those that do not have any desired outcomes) will be assigned <code>NaN</code></li></ul><p><strong>Arguments</strong></p><ul><li><code>X</code> : scenario specification</li><li><code>y</code> : Vector or Matrix of outcomes corresponding to scenarios in <code>X</code></li><li><code>rule</code> : a callable defining a &quot;desirable&quot; scenario outcome</li><li><code>target_factors</code> : list of factors of interest to perform analyses on</li><li><code>S</code> : number of slices of factor space. Higher values equate to finer granularity</li><li><code>n_boot</code> : number of bootstraps (default: 100)</li><li><code>conf</code> : confidence interval (default: 0.95)</li></ul><p><strong>Returns</strong></p><p>3-dimensional NamedMatrix, of shape <span>$S$</span> ⋅ <span>$D$</span> ⋅ 3, where:</p><ul><li><p class="math-container">\[S\]</p>is the slices,</li><li><p class="math-container">\[D\]</p>is the number of dimensions, with</li><li>boostrapped mean (dim 1) and the lower/upper 95% confidence interval (dims 2 and 3).</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># Factors of interest
foi = [:SRM, :fogging, :a_adapt]

# Find scenarios where all metrics are above their median
rule = y -&gt; all(y .&gt; 0.5)

# Map input values where to their outcomes
ADRIA.sensitivity.outcome_map(X, y, rule, foi; S=20, n_boot=100, conf=0.95)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/analysis/sensitivity.jl#L231-L271">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.sensitivity.pawn-Union{Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1}, Vector{T2}, Vector{String}}} where {T1&lt;:Real, T2&lt;:Real}" href="#ADRIA.sensitivity.pawn-Union{Tuple{T2}, Tuple{T1}, Tuple{AbstractArray{T1}, Vector{T2}, Vector{String}}} where {T1&lt;:Real, T2&lt;:Real}"><code>ADRIA.sensitivity.pawn</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">pawn(X::AbstractArray{T}, y::Vector{T}, dimnames::Vector{String}; S::Int64=10)::NamedArray{T} where {T&lt;:Real}</code></pre><p>Calculates the PAWN sensitivity index.</p><p>The PAWN method (by Pianosi and Wagener) is a moment-independent approach to Global Sensitivity Analysis. Outputs are characterized by their Cumulative Distribution Function (CDF), quantifying the variation in the output distribution after conditioning an input over &quot;slices&quot; (<span>$S$</span>) - the conditioning intervals. If both distributions coincide at all slices (i.e., the distributions are similar or identical), then the factor is deemed non-influential.</p><p>This implementation applies the Kolmogorov-Smirnov test as the distance measure and returns summary statistics (min, mean, median, max, std, and cv) over the slices.</p><p><strong>Arguments</strong></p><ul><li><code>X</code> : Model inputs</li><li><code>y</code> : Model outputs</li><li><code>S</code> : Number of slides (default: 10)</li></ul><p><strong>Returns</strong></p><p>NamedArray, of min, mean, median, max, std, and cv summary statistics.</p><p><strong>References</strong></p><ol><li><p>Pianosi, F., Wagener, T., 2018. Distribution-based sensitivity analysis from a generic input-output sample. Environmental Modelling &amp; Software 108, 197-207. https://doi.org/10.1016/j.envsoft.2018.07.019</p></li><li><p>Baroni, G., Francke, T., 2020. GSA-cvd Combining variance- and distribution-based global sensitivity analysis https://github.com/baronig/GSA-cvd</p></li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/analysis/sensitivity.jl#L22-L54">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.sensitivity.rsa-Union{Tuple{T}, Tuple{DataFrames.DataFrame, Vector{T}}} where T&lt;:Real" href="#ADRIA.sensitivity.rsa-Union{Tuple{T}, Tuple{DataFrames.DataFrame, Vector{T}}} where T&lt;:Real"><code>ADRIA.sensitivity.rsa</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">rsa(X::DataFrame, y::Vector{&lt;:Real}; S=20)::NamedArray</code></pre><p>Perform Regional Sensitivity Analysis.</p><p>Regional Sensitivity Analysis is a Monte Carlo Filtering approach which aims to identify which (group of) factors drive model outputs within or outside of a specified bound. Outputs which fall inside the bounds are regarded as &quot;behavioral&quot;, whereas those outside are &quot;non-behavioral&quot;. The distribution of behavioral/non-behavioral subsets are compared for each factor. If the subsets are not similar, then the factor is influential. The sensitivity index is simply the maximum distance between the two distributions, with larger values indicating greater sensitivity.</p><p>The implemented approach slices factor space into <span>$S$</span> bins and iteratively assesses behavioral and non-behavioral subsets with the non-parametric <span>$k$</span>-sample Anderson-Darling test. Larger values indicate greater dissimilarity (thus, sensitivity). The Anderson-Darling test places more weight on the tails compared to the Kolmogorov-Smirnov test.</p><p>RSA can indicate where in factor space model sensitivities may be, and contributes to a Value-of-Information (VoI) analysis.</p><p>Increasing the value of <span>$S$</span> increases the granularity of the analysis.</p><p>Note: Returned NaN values indicate insufficient samples in the region.</p><p><strong>Arguments</strong></p><ul><li><code>X</code> : scenario specification</li><li><code>y</code> : scenario outcomes</li><li><code>S</code> : number of bins to slice factor space into (default: 20)</li></ul><p><strong>Returns</strong></p><p>NamedArray, [bin values, factors]</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">ADRIA.sensitivity.rsa(X, y; S=20)</code></pre><p><strong>References</strong></p><ol><li><p>Pianosi, F., K. Beven, J. Freer, J. W. Hall, J. Rougier, D. B. Stephenson, and T. Wagener. 2016. Sensitivity analysis of environmental models: A systematic review with practical workflow. Environmental Modelling &amp; Software 79:214-232. https://dx.doi.org/10.1016/j.envsoft.2016.02.008</p></li><li><p>Saltelli, A., M. Ratto, T. Andres, F. Campolongo, J. Cariboni, D. Gatelli, M. Saisana, and S. Tarantola. 2008. Global Sensitivity Analysis: The Primer. Wiley, West Sussex, U.K. https://dx.doi.org/10.1002/9780470725184 Accessible at: http://www.andreasaltelli.eu/file/repository/Primer<em>Corrected</em>2022.pdf</p></li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/analysis/sensitivity.jl#L143-L194">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.sensitivity.tsa-Union{Tuple{T}, Tuple{DataFrames.DataFrame, AbstractMatrix{T}}} where T&lt;:Real" href="#ADRIA.sensitivity.tsa-Union{Tuple{T}, Tuple{DataFrames.DataFrame, AbstractMatrix{T}}} where T&lt;:Real"><code>ADRIA.sensitivity.tsa</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">tsa(X::DataFrame, y::AbstractMatrix)::NamedArray</code></pre><p>Perform Temporal (or time-varying) Sensitivity Analysis using the PAWN sensitivity index.</p><p>The sensitivity index value for time <span>$t$</span> is inclusive of all time steps prior to <span>$t$</span>. Alternate approaches use a moving window, or only data for time <span>$t$</span>.</p><p><strong>Arguments</strong></p><ul><li><code>X</code> : Scenario specification</li><li><code>y</code> : scenario outcomes over time</li></ul><p><strong>Returns</strong></p><p>NamedArray, of shape <span>$D$</span> ⋅ 6 ⋅ <span>$T$</span>, where</p><ul><li><p class="math-container">\[D\]</p>is the number of dimensions/factors</li><li>6, corresponds to the min, mean, median, max, std, and cv of the PAWN indices</li><li><p class="math-container">\[T\]</p>, the number of time steps</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">rs = ADRIA.load_results(&quot;a ResultSet of interest&quot;)

# Get scenario outcomes over time (shape: `time ⋅ scenarios`)
y_tac = ADRIA.metrics.scenario_total_cover(rs)

# Calculate sensitivity of outcome to factors for each time step
ADRIA.sensitivity.tsa(rs.inputs, y_tac)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/analysis/sensitivity.jl#L98-L126">source</a></section></article><h2 id="General-API"><a class="docs-heading-anchor" href="#General-API">General API</a><a id="General-API-1"></a><a class="docs-heading-anchor-permalink" href="#General-API" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="ADRIA.bleaching_mortality!-Tuple{AbstractMatrix{Float64}, AbstractMatrix{Float64}, AbstractArray{Float64}, Int64, Vector{Float64}, Vector{Float64}, AbstractArray{Float64}, Vector{Float64}, Real}" href="#ADRIA.bleaching_mortality!-Tuple{AbstractMatrix{Float64}, AbstractMatrix{Float64}, AbstractArray{Float64}, Int64, Vector{Float64}, Vector{Float64}, AbstractArray{Float64}, Vector{Float64}, Real}"><code>ADRIA.bleaching_mortality!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">bleaching_mortality!(Y::Matrix{Float64}, tstep::Int64, depth::Vector{Float64},
    s::Vector{Float64}, dhw::Float64, a_adapt::Float64, n_adapt::Float64)</code></pre><p>Calculates bleaching mortality taking into account depth and bleaching sensitivity of corals. Model is adapted from Bozec et al., [2], itself based on data from Hughes et al., <a href="bleaching sensitivity">3</a> and Baird et al., <a href="relationship between bleaching and depth">1</a>.</p><p><strong>Arguments</strong></p><ul><li><code>Y</code> : Matrix to save results into</li><li><code>tstep</code> : Current time step</li><li><code>depth</code> : Mean site depth (m) for each site</li><li><code>s</code> : Bleaching sensitivity of corals (relative values) for each taxa/size class</li><li><code>dhw</code> : Degree Heating Week experienced at site</li><li><code>a_adapt</code> : Level of assisted adaptation (DHW reduction)</li><li><code>n_adapt</code> : Level of natural adaptation (DHW reduction linearly scaled over time)</li></ul><p><strong>Returns</strong></p><p>Nothing</p><p><strong>References</strong></p><ol><li><p>Baird, A., Madin, J., Álvarez-Noriega, M., Fontoura, L., Kerry, J., Kuo, C.,   Precoda, K., Torres-Pulliza, D., Woods, R., Zawada, K., &amp; Hughes, T. (2018). A decline in bleaching suggests that depth can provide a refuge from global   warming in most coral taxa. Marine Ecology Progress Series, 603, 257-264. https://doi.org/10.3354/meps12732</p></li><li><p>Bozec, Y.-M., Hock, K., Mason, R. A. B., Baird, M. E., Castro-Sanguino, C.,   Condie, S. A., Puotinen, M., Thompson, A., &amp; Mumby, P. J. (2022). Cumulative impacts across Australia&#39;s Great Barrier Reef: A mechanistic evaluation. Ecological Monographs, 92(1), e01494. https://doi.org/10.1002/ecm.1494</p></li><li><p>Hughes, T. P., Kerry, J. T., Baird, A. H., Connolly, S. R., Dietzel, A., Eakin, C. M.,   Heron, S. F., Hoey, A. S., Hoogenboom, M. O., Liu, G., McWilliam, M. J., Pears, R. J.,   Pratchett, M. S., Skirving, W. J., Stella, J. S., &amp; Torda, G. (2018). Global warming transforms coral reef assemblages. Nature, 556(7702), 492-496. https://doi.org/10.1038/s41586-018-0041-2</p></li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/ecosystem/corals/growth.jl#L152-L192">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.coral_spec-Tuple{}" href="#ADRIA.coral_spec-Tuple{}"><code>ADRIA.coral_spec</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">coral_spec()</code></pre><p>Template for coral parameter values for ADRIA. Includes &quot;vital&quot; bio/ecological parameters, to be filled with sampled or user-specified values.</p><p>Any parameter added to the <code>params</code> DataFrame defined here will automatically be made available to the ADRIA model.</p><p>Notes: Values for the historical, temporal patterns of degree heating weeks between bleaching years come from [1].</p><p><strong>Returns</strong></p><ul><li><code>params</code> : NamedTuple[taxa<em>names, param</em>names, params], taxa names, parameter          names, and parameter values for each coral taxa, group and size class</li></ul><p><strong>References</strong></p><ol><li><p>Lough, J. M., Anderson, K. D., &amp; Hughes, T. P. (2018).  Increasing thermal stress for tropical coral reefs: 1871-2017.  Scientific Reports, 8(1), 6079.  https://doi.org/10.1038/s41598-018-24530-9</p></li><li><p>Hall, V.R. &amp; Hughes, T.P. 1996. Reproductive strategies of modular organisms:   comparative studies of reef-building corals. Ecology, 77: 950 - 963. https://dx.doi.org/10.2307/2265514</p></li><li><p>Bozec, Y.-M., Rowell, D., Harrison, L., Gaskell, J., Hock, K.,  Callaghan, D., Gorton, R., Kovacs, E. M., Lyons, M., Mumby, P.,  &amp; Roelfsema, C. (2021). Baseline mapping to support reef restoration and   resilience-based management in the Whitsundays. https://doi.org/10.13140/RG.2.2.26976.20482</p></li><li><p>Bozec, Y.-M., Hock, K., Mason, R. A. B., Baird, M. E., Castro-Sanguino, C.,  Condie, S. A., Puotinen, M., Thompson, A., &amp; Mumby, P. J. (2022). Cumulative impacts across Australia&#39;s Great Barrier Reef: A mechanistic evaluation. Ecological Monographs, 92(1), e01494. https://doi.org/10.1002/ecm.1494</p></li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/ecosystem/Ecosystem.jl#L243-L285">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.create_coral_struct" href="#ADRIA.create_coral_struct"><code>ADRIA.create_coral_struct</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">create_coral_struct(bounds=(0.9, 1.1))</code></pre><p>Generates Coral struct using the default parameter spec.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs"># Define coral struct with auto-generated parameter ranges
# (default in ADRIA is ± 10%, triangular distribution with peak at 0.5)
create_coral_struct()
coral = Coral()

# Recreate coral spec ± 50% from nominal values
create_coral_struct((0.5, 1.5))
coral = Coral()</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/ecosystem/Ecosystem.jl#L170-L186">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.env_stats-Tuple{ADRIA.ResultSet, String, String}" href="#ADRIA.env_stats-Tuple{ADRIA.ResultSet, String, String}"><code>ADRIA.env_stats</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">env_stats(rs::ResultSet, s_name::String, rcp::String)
env_stats(rs::ResultSet, s_name::String, rcp::String, member::Int)
env_stats(rs::ResultSet, s_name::String, stat::String, rcp::String, member::Int)</code></pre><p>Extract statistics for a given environmental layer (&quot;DHW&quot; or &quot;wave&quot;)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/io/ResultSet.jl#L219-L225">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.fecundity_scope!-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, AbstractArray{T}, AbstractMatrix{T}, AbstractArray{T}}} where T&lt;:Float64" href="#ADRIA.fecundity_scope!-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, AbstractArray{T}, AbstractMatrix{T}, AbstractArray{T}}} where T&lt;:Float64"><code>ADRIA.fecundity_scope!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">fecundity_scope!(fec_groups::Array{Float64, 2}, fec_all::Array{Float64, 2}, fec_params::Array{Float64},
                 Y_pstep::Array{Float64, 2}, k_area::Array{Float64})::Nothing</code></pre><p>The scope that different coral groups and size classes have for producing larvae without consideration of environment.</p><p>Coral fecundity per coral area of the different size classes. When multiplied by the relative cover of each size class within taxa, this produces an estimate of the relative fecundity of each coral group and size. Total relative fecundity of a group is then calculated as the sum of fecundities across size classes.</p><p><strong>Arguments</strong></p><ul><li><code>fec_groups</code> : Matrix[n<em>classes, n</em>sites], memory cache to place results into</li><li><code>fec_all</code> : Matrix[n<em>taxa, n</em>sites], temporary cache to place intermediate fecundity values into</li><li><code>fec_params</code> : Vector, coral fecundity parameters (in per m²) for each species/size class</li><li><code>Y_pstep</code> : Matrix[n<em>taxa, n</em>sites], of coral cover values for the previous time step</li><li><code>site_area</code> : Vector[n_sites], total site area in m²</li></ul><p><strong>Returns</strong></p><p>Matrix[n<em>classes, n</em>sites] : fecundity per m² of coral</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/ecosystem/corals/growth.jl#L214-L236">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.growthODE-Tuple{Matrix{Float64}, Matrix{Float64}, NamedTuple, Real}" href="#ADRIA.growthODE-Tuple{Matrix{Float64}, Matrix{Float64}, NamedTuple, Real}"><code>ADRIA.growthODE</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">growthODE(du, X, p, _)</code></pre><p>Base coral growth function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/ecosystem/corals/growth.jl#L40-L44">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.run_scenario-Tuple{Int64, Union{AbstractVector, DataFrames.DataFrameRow}, Domain, NamedTuple, NamedTuple}" href="#ADRIA.run_scenario-Tuple{Int64, Union{AbstractVector, DataFrames.DataFrameRow}, Domain, NamedTuple, NamedTuple}"><code>ADRIA.run_scenario</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">run_scenario(idx::Int64, param_set::Union{AbstractVector, DataFrameRow}, domain::Domain, data_store::NamedTuple, cache::NamedTuple)::NamedTuple
run_scenario(idx::Int64, param_set::Union{AbstractVector, DataFrameRow}, domain::Domain, data_store::NamedTuple)::NamedTuple
run_scenario(param_set::Union{AbstractVector, DataFrameRow}, domain::Domain, cache::NamedTuple)::NamedTuple
run_scenario(param_set::NamedTuple, domain::Domain)::NamedTuple</code></pre><p>Run individual scenarios for a given domain, saving results to a Zarr data store. Results are stored in Zarr format at a pre-configured location. Sets up a new <code>cache</code> if not provided.</p><p><strong>Notes</strong></p><p>Logs of site ranks only store the mean site rankings over all environmental scenarios. This is to reduce the volume of data stored.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/scenario.jl#L179-L192">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.select-Tuple{ADRIA.ResultSet, String}" href="#ADRIA.select-Tuple{ADRIA.ResultSet, String}"><code>ADRIA.select</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">select(r::ResultSet, op::String)</code></pre><p>Hacky scenario filtering - to be replaced with more robust approach.</p><p>Only supports filtering by single attribute. Should be expanded to support filtering metric results too.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">select(result, &quot;guided .&gt; 0.0&quot;)

# Above expands to:
# result.inputs.guided .&gt; 0.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/io/ResultSet.jl#L269-L284">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.site_area-Tuple{Domain}" href="#ADRIA.site_area-Tuple{Domain}"><code>ADRIA.site_area</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">site_area(domain::Domain)::Vector{Float64}</code></pre><p>Get site area for the given domain.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/Domain.jl#L482-L485">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.site_k_area-Tuple{Domain}" href="#ADRIA.site_k_area-Tuple{Domain}"><code>ADRIA.site_k_area</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">site_k_area(domain::Domain)::Vector{Float64}</code></pre><p>Get maximum coral cover area for the given domain in absolute area.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/Domain.jl#L490-L493">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.timesteps-Tuple{ADRIA.ResultSet}" href="#ADRIA.timesteps-Tuple{ADRIA.ResultSet}"><code>ADRIA.timesteps</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">timesteps(rs::ResultSet)</code></pre><p>Retrieve the time steps represented in the result set.</p><p><strong>Arguments</strong></p><ul><li><code>rs</code> : ResultSet</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/io/ResultSet.jl#L297-L304">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.timesteps-Tuple{Domain}" href="#ADRIA.timesteps-Tuple{Domain}"><code>ADRIA.timesteps</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Extract the time steps represented in the data package.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/Domain.jl#L521">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.Domain" href="#ADRIA.Domain"><code>ADRIA.Domain</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Domain{M,I,D,S,V,T,X}</code></pre><p>Core ADRIA domain. Represents study area.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/Domain.jl#L20-L24">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.Domain-Tuple{String, String, String, Vector, String, String, String, String, String, String, String}" href="#ADRIA.Domain-Tuple{String, String, String, Vector, String, String, String, String, String, String, String}"><code>ADRIA.Domain</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Domain(name::String, rcp::String, timeframe::Vector, site_data_fn::String, site_id_col::String, unique_site_id_col::String, init_coral_fn::String,
       conn_path::String, dhw_fn::String, wave_fn::String)::Domain</code></pre><p>Convenience constructor for Domain.</p><p><strong>Arguments</strong></p><ul><li><code>name</code> : Name of domain</li><li><code>dpkg_path</code> : location of data package</li><li><code>rcp</code> : RCP scenario represented</li><li><code>timeframe</code> : Time steps represented</li><li><code>site_data_fn</code> : File name of spatial data used</li><li><code>site_id_col</code> : Column holding name of reef the site is associated with (non-unique)</li><li><code>unique_site_id_col</code> : Column holding unique site names/ids</li><li><code>init_coral_fn</code> : Name of file holding initial coral cover values</li><li><code>conn_path</code> : Path to directory holding connectivity data</li><li><code>dhw_fn</code> : Filename of DHW data cube in use</li><li><code>wave_fn</code> : Filename of wave data cube</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/Domain.jl#L108-L126">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.Domain-Union{Tuple{T}, Tuple{String, String, ADRIA.EnvLayer, NamedArrays.NamedMatrix{&lt;:T}, Vector{Float64}, Vector{Float64}, Vector{Int64}, DataFrames.DataFrame, Matrix{Float64}, Float64, String, String, NamedArrays.NamedMatrix{&lt;:T}, ADRIA.CoralGrowth, Vector{String}, Vector{String}, AbstractArray{&lt;:T}, AbstractArray{&lt;:T}}} where T&lt;:Real" href="#ADRIA.Domain-Union{Tuple{T}, Tuple{String, String, ADRIA.EnvLayer, NamedArrays.NamedMatrix{&lt;:T}, Vector{Float64}, Vector{Float64}, Vector{Int64}, DataFrames.DataFrame, Matrix{Float64}, Float64, String, String, NamedArrays.NamedMatrix{&lt;:T}, ADRIA.CoralGrowth, Vector{String}, Vector{String}, AbstractArray{&lt;:T}, AbstractArray{&lt;:T}}} where T&lt;:Real"><code>ADRIA.Domain</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Barrier function to create Domain struct without specifying Intervention/Criteria/Coral/SimConstant parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/Domain.jl#L51-L53">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ADRIA.SimConstants" href="#ADRIA.SimConstants"><code>ADRIA.SimConstants</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SimConstants</code></pre><p>Struct of simulation constants for ADRIA</p><p><strong>References</strong></p><ol><li><p>Lough, J. M., Anderson, K. D., &amp; Hughes, T. P. (2018). Increasing thermal stress for tropical coral reefs: 1871-2017. Scientific Reports, 8(1), 6079. https://doi.org/10.1038/s41598-018-24530-9</p></li><li><p>Hughes, T. P., Kerry, J. T., Baird, A. H., Connolly, S. R.,   Dietzel, A., Eakin, C. M., Heron, S. F., Hoey, A. S.,   Hoogenboom, M. O., Liu, G., McWilliam, M. J., Pears, R. J.,   Pratchett, M. S., Skirving, W. J., Stella, J. S., &amp; Torda, G. (2018). Global warming transforms coral reef assemblages. Nature, 556(7702), 492-496. https://doi.org/10.1038/s41586-018-0041-2</p></li><li><p>Bozec, Y.-M., Rowell, D., Harrison, L., Gaskell, J., Hock, K.,   Callaghan, D., Gorton, R., Kovacs, E. M., Lyons, M., Mumby, P.,   &amp; Roelfsema, C. (2021). Baseline mapping to support reef restoration and   resilience-based management in the Whitsundays. https://doi.org/10.13140/RG.2.2.26976.20482</p></li><li><p>Bozec, Y.-M., Hock, K., Mason, R. A. B., Baird, M. E., Castro-Sanguino, C.,   Condie, S. A., Puotinen, M., Thompson, A., &amp; Mumby, P. J. (2022). Cumulative impacts across Australia&#39;s Great Barrier Reef: A mechanistic evaluation.  Ecological Monographs, 92(1), e01494. https://doi.org/10.1002/ecm.1494</p></li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/open-AIMS/ADRIA.jl/blob/e44bb22360697ea14491fc34d34e93c987d9e0af/src/ecosystem/const_params.jl#L1-L32">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../development/building_docs/">« Building Documentation</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Monday 30 January 2023 06:32">Monday 30 January 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
