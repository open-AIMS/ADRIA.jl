<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Development setup · ADRIA.jl</title><meta name="title" content="Development setup · ADRIA.jl"/><meta property="og:title" content="Development setup · ADRIA.jl"/><meta property="twitter:title" content="Development setup · ADRIA.jl"/><meta name="description" content="Documentation for ADRIA.jl."/><meta property="og:description" content="Documentation for ADRIA.jl."/><meta property="twitter:description" content="Documentation for ADRIA.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="ADRIA.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ADRIA.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><a class="tocitem" href="../../synopsis/">Synopsis</a></li><li><span class="tocitem">Usage</span><ul><li><a class="tocitem" href="../../usage/getting_started/">Getting Started</a></li><li><a class="tocitem" href="../../usage/domain/">Loading a Domain</a></li><li><a class="tocitem" href="../../usage/results/">Loading Results</a></li><li><a class="tocitem" href="../../usage/scenario_generation/">Generating scenarios</a></li><li><a class="tocitem" href="../../usage/scenario_runs/">Running scenarios</a></li><li><a class="tocitem" href="../../usage/analysis/">Analysis</a></li><li><a class="tocitem" href="../../usage/cookbook/">Cookbook examples</a></li></ul></li><li><a class="tocitem" href="../../dMCDA/">Dynamic Multi-Criteria Decision Analysis</a></li><li><span class="tocitem">Architecture</span><ul><li><a class="tocitem" href="../../architecture/architecture/">Architectural overview</a></li><li><a class="tocitem" href="../../architecture/domain_and_resultsets/">Inputs and Outputs</a></li></ul></li><li><span class="tocitem">Development</span><ul><li class="is-active"><a class="tocitem" href>Development setup</a><ul class="internal"><li><a class="tocitem" href="#Install-Julia"><span>Install Julia</span></a></li><li><a class="tocitem" href="#Recommendations"><span>Recommendations</span></a></li><li><a class="tocitem" href="#Initial-Setup"><span>Initial Setup</span></a></li><li><a class="tocitem" href="#Sandbox"><span>Sandbox</span></a></li><li><a class="tocitem" href="#Testing"><span>Testing</span></a></li><li><a class="tocitem" href="#Code-Style"><span>Code Style</span></a></li><li><a class="tocitem" href="#Git-blame-ignore-revs"><span>Git blame ignore revs</span></a></li><li><a class="tocitem" href="#Notes"><span>Notes</span></a></li></ul></li><li><a class="tocitem" href="../metrics/">Contributing a metric</a></li><li><a class="tocitem" href="../release_guide/">Release Guide</a></li><li><a class="tocitem" href="../building_docs/">Building Documentation</a></li></ul></li><li><a class="tocitem" href="../../API/">ADRIA API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Development</a></li><li class="is-active"><a href>Development setup</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Development setup</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/open-AIMS/ADRIA.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/open-AIMS/ADRIA.jl/blob/main/docs/src/development/development_setup.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Development-setup"><a class="docs-heading-anchor" href="#Development-setup">Development setup</a><a id="Development-setup-1"></a><a class="docs-heading-anchor-permalink" href="#Development-setup" title="Permalink"></a></h1><h2 id="Install-Julia"><a class="docs-heading-anchor" href="#Install-Julia">Install Julia</a><a id="Install-Julia-1"></a><a class="docs-heading-anchor-permalink" href="#Install-Julia" title="Permalink"></a></h2><p>Install Julia if not already done so, preferably using <a href="https://github.com/JuliaLang/juliaup">juliaup</a>.</p><h3 id="Windows"><a class="docs-heading-anchor" href="#Windows">Windows</a><a id="Windows-1"></a><a class="docs-heading-anchor-permalink" href="#Windows" title="Permalink"></a></h3><p>There may be issues installing juliaup from the Windows Store (or otherwise undesirable). In such cases, use the alternate MSIX App installer (https://install.julialang.org/Julia.appinstaller)</p><h2 id="Recommendations"><a class="docs-heading-anchor" href="#Recommendations">Recommendations</a><a id="Recommendations-1"></a><a class="docs-heading-anchor-permalink" href="#Recommendations" title="Permalink"></a></h2><ul><li>It is recommended that the <a href="https://github.com/JuliaLang/juliaup">juliaup</a> tool be used to ease managing Julia versions.</li><li>We recommend <a href="https://code.visualstudio.com/">VS Code</a> with its Julia extension when developing ADRIA.</li><li>Install the VS Code Julia Formatter extension (note: <strong>not</strong> the JuliaFormatter.jl package).</li><li>We also recommend the built-in Julia REPL within VS Code be used (see the notes below).</li></ul><h2 id="Initial-Setup"><a class="docs-heading-anchor" href="#Initial-Setup">Initial Setup</a><a id="Initial-Setup-1"></a><a class="docs-heading-anchor-permalink" href="#Initial-Setup" title="Permalink"></a></h2><h3 id="Using-the-console"><a class="docs-heading-anchor" href="#Using-the-console">Using the console</a><a id="Using-the-console-1"></a><a class="docs-heading-anchor-permalink" href="#Using-the-console" title="Permalink"></a></h3><p>Once Julia is installed, clone the ADRIA.jl repository and navigate to the project folder:</p><pre><code class="language-bash hljs">$ git clone git@github.com:open-AIMS/ADRIA.jl.git
$ cd ./ADRIA.jl</code></pre><p>Start Julia specifying the current directory as the project environment:</p><pre><code class="language-bash hljs">$ julia --project=.</code></pre><p>Switch to the package manager (<code>]</code>) and instantiate the project. <strong>This only needs to be done once</strong>.</p><pre><code class="language-julia-REPL hljs">julia&gt; ]
(ADRIA.jl) pkg&gt; instantiate</code></pre><p>This will sets up the project packages.</p><h2 id="Sandbox"><a class="docs-heading-anchor" href="#Sandbox">Sandbox</a><a id="Sandbox-1"></a><a class="docs-heading-anchor-permalink" href="#Sandbox" title="Permalink"></a></h2><p>For development purposes, set up a sandbox environment <strong>(setup only needs to be done once)</strong>. This environment will function as a project apart from ADRIA, where you can install any packages, including ADRIA.jl, and run your code. When installing ADRIA.jl at the sandbox, use the <code>dev</code> command instead of <code>add</code>. For more information, please refer to <a href="https://pkgdocs.julialang.org/v1/managing-packages/#developing">Pkg.jl documentation</a>.</p><p>Once you are inside ADRIA.jl project folder, create a folder named <code>sandbox</code> and start julia inside it:</p><pre><code class="language-bash hljs">$ mkdir sandbox
$ cd sandbox
$ julia --project=.</code></pre><p>Switch to the package manager (<code>]</code>) and add ADRIA.jl as a local package under development</p><pre><code class="language-julia-REPL hljs">julia&gt; ]
(sandbox) pkg&gt; dev ../</code></pre><p>You may also install additional packages for visualizations and debugging tools</p><pre><code class="language-julia-REPL hljs">(sandbox) pkg&gt; add GLMakie GeoMakie GraphMakie
(sandbox) pkg&gt; add Revise Infiltrator BenchmarkTools JET</code></pre><p>Press backspace or Ctrl+C to leave the package manager.</p><p>Development scripts/functions can now be worked on in the <code>sandbox</code> folder, and its sub-folders, without these polluting the ADRIA project itself.</p><h2 id="Testing"><a class="docs-heading-anchor" href="#Testing">Testing</a><a id="Testing-1"></a><a class="docs-heading-anchor-permalink" href="#Testing" title="Permalink"></a></h2><p>To run the full test suite, rebuilding the environment as necessary:</p><pre><code class="language-bash hljs">$ julia --project=.
julia&gt; ]test</code></pre><p>Rebuilding the environment can be unnecessary for every test run during development. It such cases, <code>include()</code> the <code>runtests.jl</code> file directly.</p><pre><code class="language-bash hljs"># Assuming the current working directory is the project root.
# Adjust the filepath as necessary if this is not the case.
include(&quot;test/runtests.jl&quot;)</code></pre><p>If a specific test case is being run, write the test file to be a standalone script (importing all necessary packages, including <code>Test</code>) and run it directly.</p><p>Doing so allows use of debugging packages if necessary.</p><pre><code class="language-bash hljs">include(&quot;test/some_test_file.jl&quot;)</code></pre><p>Once the test is complete, put the tests in a <code>testset</code> as and if required. If a new file is added to the test suite, <code>include()</code> it in <code>test/runtests.jl</code></p><p>See <a href="https://docs.julialang.org/en/v1/stdlib/Test/#Basic-Unit-Tests">the Test documentation</a> for further details.</p><h2 id="Code-Style"><a class="docs-heading-anchor" href="#Code-Style">Code Style</a><a id="Code-Style-1"></a><a class="docs-heading-anchor-permalink" href="#Code-Style" title="Permalink"></a></h2><p>We are currently moving to follow <a href="https://github.com/invenia/BlueStyle">Blue Style Guide</a>. All PRs should follow this style guide. The <a href="https://github.com/julia-actions/julia-format">julia-format</a> GitHub workflow will check that your PR&#39;s code is formatted. Note that this check requires all code in the repo to be formatted, not only the files modified by your PR.</p><p>Use the VSCode <code>Format Document</code> or <code>Format Selection</code> actions to format your code.</p><p>To reformat the entire project:</p><pre><code class="language-julia hljs">using JuliaFormatter
format(&quot;.&quot;)</code></pre><p><em>If this returns <code>false</code>, call <code>format()</code> again.</em></p><p>Formatter configuration is defined in <code>.JuliaFormatter.toml</code>, see <a href="https://domluna.github.io/JuliaFormatter.jl/stable/">JuliaFormatter docs</a>.</p><h3 id="VSCode-Settings"><a class="docs-heading-anchor" href="#VSCode-Settings">VSCode Settings</a><a id="VSCode-Settings-1"></a><a class="docs-heading-anchor-permalink" href="#VSCode-Settings" title="Permalink"></a></h3><p>Open Settings (<code>Ctrl+,</code>). Search for <code>trim</code> and ensure the following options are all ticked/enabled:</p><ul><li>Files: Trim Final Newlines</li><li>Files: Trim Trailing Whitespace</li><li>Editor: Trim Auto Whitespace</li></ul><p>An optional, but recommended, step would be to add a ruler guide to indicate where the character limit/width is.</p><p>Search for <code>rulers</code> and click on &quot;Edit in settings.json&quot; under &quot;Editor: Rulers&quot;</p><p>Add &quot;92&quot; to the list of ruler lengths, such that the <code>editor.rulers</code> entry looks like this:</p><pre><code class="language-json hljs">&quot;editor.rulers&quot;: [
        92
    ]</code></pre><p>Adding multiple values adds more guide lines at the indicated widths.</p><p><em>Important:</em> if you installed the <em>oh7z Julia Formatter</em> VSCode extension, uninstall or disable it for this workspace. That extension always uses its formatter settings and does not support <code>.JuliaFormatter.toml</code> whereas the main Julia extension does. The only reason to use the oh7z extension is for Julia projects that do not have a <code>.JuliaFormatter.toml</code> file.</p><h2 id="Git-blame-ignore-revs"><a class="docs-heading-anchor" href="#Git-blame-ignore-revs">Git blame ignore revs</a><a id="Git-blame-ignore-revs-1"></a><a class="docs-heading-anchor-permalink" href="#Git-blame-ignore-revs" title="Permalink"></a></h2><p>If you have GitLens (or similar extension), it will show the author of a line of code using git blame. To ignore commits like &quot;re-format entire project&quot;, run this once:</p><p><code>git config --local blame.ignoreRevsFile .git-blame-ignore-revs</code></p><p>If you reformat code and want to ignore that commit, simply add the commit SHA to the <code>.git-blame-ignore-revs</code> file.</p><h2 id="Notes"><a class="docs-heading-anchor" href="#Notes">Notes</a><a id="Notes-1"></a><a class="docs-heading-anchor-permalink" href="#Notes" title="Permalink"></a></h2><p>The very first import of the ADRIA package will be very slow as it attempts to precompile common functions to reduce later start up time. The same applies when running ADRIA for the first time. This slow initial precompilation has to be repeated if the package is modified, but will remain &quot;fast&quot; if no changes are made.</p><p>Use the <a href="https://github.com/timholy/Revise.jl">Revise package</a> to avoid having to repeatedly restart the REPL to incorporate code changes. By default, the VS Code REPL will auto-load this package.</p><p>A custom <a href="https://julialang.github.io/PackageCompiler.jl/dev/sysimages.html">sysimage</a> can also be created to reduce start up times.</p><p>VS Code now has (experimental) support for generating a custom sysimage for its REPL. Prior to Julia v1.9, a custom sysimage for the development/sandbox environment was highly recommended. Julia v1.9 introduced an improved precompilation process and the concept of extension packages. As many packages are still in the process of taking advantage of these changes, the sysimage may not successfully build. Given precompilation is now much faster than previously, the sysimage can be considered to be a &quot;nice to have&quot;.</p><p>The same caveats as above apply: the sysimage has to be recreated if the project specification (e.g., expected package dependencies) changes.</p><p>See: <a href="https://www.julia-vscode.org/docs/dev/userguide/compilesysimage/">This guide</a></p><p>Otherwise, if the VS Code build task cannot be used, see the documentation <a href="https://github.com/open-AIMS/ADRIA.jl/tree/main/build">here</a> for a quick how to. Note: compilation time to create a sysimage can be upwards of 15mins and, again, has to be repeated if the project packages are updated.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../architecture/domain_and_resultsets/">« Inputs and Outputs</a><a class="docs-footer-nextpage" href="../metrics/">Contributing a metric »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.6.0 on <span class="colophon-date" title="Tuesday 22 October 2024 04:54">Tuesday 22 October 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
