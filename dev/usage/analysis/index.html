<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Analysis · ADRIA Documentation</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="ADRIA Documentation logo"/></a><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">ADRIA.jl Documentation</a></li><li><a class="tocitem" href="../../synopsis/">Synopsis</a></li><li><span class="tocitem">Usage</span><ul><li><a class="tocitem" href="../getting_started/">Getting Started</a></li><li><a class="tocitem" href="../domain/">Loading a Domain</a></li><li><a class="tocitem" href="../scenario_generation/">Generating scenarios</a></li><li><a class="tocitem" href="../scenario_runs/">Running scenarios</a></li><li class="is-active"><a class="tocitem" href>Analysis</a><ul class="internal"><li><a class="tocitem" href="#Available-Metrics"><span>Available Metrics</span></a></li><li><a class="tocitem" href="#Visualizations"><span>Visualizations</span></a></li><li><a class="tocitem" href="#Scenario-outcomes"><span>Scenario outcomes</span></a></li><li class="toplevel"><a class="tocitem" href="#Other-visualizations"><span>Other visualizations</span></a></li><li><a class="tocitem" href="#PAWN-sensitivity-(heatmap-overview)"><span>PAWN sensitivity (heatmap overview)</span></a></li><li><a class="tocitem" href="#Temporal-Sensitivity-Analysis"><span>Temporal Sensitivity Analysis</span></a></li><li><a class="tocitem" href="#Regional-Sensitivity-Analysis"><span>Regional Sensitivity Analysis</span></a></li><li><a class="tocitem" href="#Outcome-mapping"><span>Outcome mapping</span></a></li><li><a class="tocitem" href="#GUI-for-high-level-exploration-(prototype-only!)"><span>GUI for high-level exploration (prototype only!)</span></a></li></ul></li><li><a class="tocitem" href="../scenario_discovery/">Scenario Discovery</a></li></ul></li><li><a class="tocitem" href="../../dMCDA/">Dynamic Multi-Criteria Decision Analysis</a></li><li><span class="tocitem">Architecture</span><ul><li><a class="tocitem" href="../../architecture/architecture/">ADRIA Architecture</a></li><li><a class="tocitem" href="../../architecture/domain_and_resultsets/">Inputs and Outputs</a></li></ul></li><li><span class="tocitem">Development</span><ul><li><a class="tocitem" href="../../development/development_setup/">Development setup</a></li><li><a class="tocitem" href="../../development/metrics/">Contributing a metric</a></li><li><a class="tocitem" href="../../development/release_guide/">Release Guide</a></li><li><a class="tocitem" href="../../development/building_docs/">Building Documentation</a></li></ul></li><li><a class="tocitem" href="../../API/">ADRIA API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Usage</a></li><li class="is-active"><a href>Analysis</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Analysis</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/open-AIMS/ADRIA.jl/blob/main/docs/src/usage/analysis.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Analysis"><a class="docs-heading-anchor" href="#Analysis">Analysis</a><a id="Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Analysis" title="Permalink"></a></h1><h2 id="Available-Metrics"><a class="docs-heading-anchor" href="#Available-Metrics">Available Metrics</a><a id="Available-Metrics-1"></a><a class="docs-heading-anchor-permalink" href="#Available-Metrics" title="Permalink"></a></h2><p>A range of metrics are defined as part of the ADRIA framework.</p><p>See the <a href="usage/@ref">metrics</a> page for more details.</p><p>Here, we extract results for specific metrics for each timestep and sites for all the scenarios run.</p><pre><code class="language-julia hljs">tac = ADRIA.metrics.total_absolute_cover(rs)
rsv = ADRIA.metrics.relative_shelter_volume(rs)
juves = ADRIA.metrics.juveniles(rs)</code></pre><p>Some times we&#39;re more interested in the scenario-level performance:</p><pre><code class="language-julia hljs">s_tac = ADRIA.metrics.scenario_tac(rs)
s_rsv = ADRIA.metrics.scenario_rsv(rs)
s_juves = ADRIA.metrics.scenario_juveniles(rs)</code></pre><h2 id="Visualizations"><a class="docs-heading-anchor" href="#Visualizations">Visualizations</a><a id="Visualizations-1"></a><a class="docs-heading-anchor-permalink" href="#Visualizations" title="Permalink"></a></h2><p>The Makie.jl ecosystem is used to produce figures.</p><pre><code class="language-julia hljs"># Install additional packages if necessary
# ]add GLMakie GeoMakie GraphMakie

# Import additional packages and the visualization extension will compile.
using GLMakie, GeoMakie, GraphMakie
# [ Info: Precompiling AvizExt [7cc86020-4844-5174-99c6-5a0a5943f024]

# If using VS Code, you may need to deactivate the inline plotting feature
# to make figures appear.
Makie.inline!(false)

using ADRIA</code></pre><h2 id="Scenario-outcomes"><a class="docs-heading-anchor" href="#Scenario-outcomes">Scenario outcomes</a><a id="Scenario-outcomes-1"></a><a class="docs-heading-anchor-permalink" href="#Scenario-outcomes" title="Permalink"></a></h2><p>Plots scenario trajectories.</p><pre><code class="language-julia hljs"># First run some scenarios
# dom = ADRIA.load_domain(&quot;path to domain data&quot;)

# Create some scenarios
# num_samples = 4096
# scens = ADRIA.sample(dom, num_samples)

# Run the scenarios ...
rs = ADRIA.run_scenarios(scens, dom, &quot;45&quot;)
# ... or load pre-existing scenarios
# rs = ADRIA.load_results(&quot;path to a result set&quot;)

# Obtain data to plot (here, scenario-level metrics)
s_tac = ADRIA.metrics.scenario_total_cover(rs)

# Plot a quick scenario overview
ADRIA.viz.scenario(rs, s_tac; axis_opts=Dict(:ylabel=&gt;&quot;Example Metric&quot;))

# Can also compose a figure with subplots
s_juves = ADRIA.metrics.scenario_relative_juveniles(rs)

tf = Figure(resolution=(1600, 600))  # resolution in pixels

# Implicitly create a single figure with 2 columns
ADRIA.viz.scenario!(tf[1, 1], rs, s_tac; opts=Dict(:by_RCP =&gt; false), axis_opts=Dict(:title =&gt; &quot;TAC [m²]&quot;));
ADRIA.viz.scenario!(tf[1, 2], rs, s_juves; opts=Dict(:by_RCP =&gt; false), axis_opts=Dict(:title =&gt; &quot;Juveniles [%]&quot;));

tf  # display the figure
save(&quot;aviz_scenario.png&quot;, tf)  # save the figure to a file</code></pre><p><img src="/ADRIA.jl/dev/assets/imgs/aviz_scenario.png?raw=true &quot;Quick scenario plots&quot;" alt="Quick scenario plots"/></p><h1 id="Other-visualizations"><a class="docs-heading-anchor" href="#Other-visualizations">Other visualizations</a><a id="Other-visualizations-1"></a><a class="docs-heading-anchor-permalink" href="#Other-visualizations" title="Permalink"></a></h1><p>The examples below are to illustrate usage. For further information on each method of analysis, see the documentation for the given function.</p><p>Some options shared for the plots below are defined here.</p><pre><code class="language-julia hljs"># Some shared options for the example plots below
fig_opts = Dict(:resolution =&gt; (1600, 800))

# Factors of Interest
opts = Dict(
    :factors =&gt; [:RCP, :dhw_scenario, :wave_scenario, :guided, :seed_TA, :seed_CA, :fogging, :SRM, :a_adapt, :n_adapt]
)</code></pre><h2 id="PAWN-sensitivity-(heatmap-overview)"><a class="docs-heading-anchor" href="#PAWN-sensitivity-(heatmap-overview)">PAWN sensitivity (heatmap overview)</a><a id="PAWN-sensitivity-(heatmap-overview)-1"></a><a class="docs-heading-anchor-permalink" href="#PAWN-sensitivity-(heatmap-overview)" title="Permalink"></a></h2><p>The PAWN sensitivity analysis method is a moment-independent approach to Global Sensitivity Analysis. It is described as producing robust results at relatively low sample sizes, and is used to screen factors (i.e., identification of important factors) and rank factors as well (ordering factors by their relative contribution towards a given quantity of interest).</p><pre><code class="language-julia hljs"># Sensitivity (of mean scenario outcomes to factors)
mean_s_tac = vec(mean(s_tac, dims=1))
tac_Si = ADRIA.sensitivity.pawn(rs, mean_s_tac)
pawn_fig = ADRIA.viz.pawn(
    tac_Si;
    opts,
    fig_opts
)
save(&quot;pawn_si.png&quot;, pawn_fig)</code></pre><p><img src="/ADRIA.jl/dev/assets/imgs/pawn_si.png?raw=true &quot;PAWN sensitivity plots&quot;" alt="PAWN sensitivity plots"/></p><h2 id="Temporal-Sensitivity-Analysis"><a class="docs-heading-anchor" href="#Temporal-Sensitivity-Analysis">Temporal Sensitivity Analysis</a><a id="Temporal-Sensitivity-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Temporal-Sensitivity-Analysis" title="Permalink"></a></h2><p>Temporal (or Time-varying) Sensitivity Analysis applies sensitivity analysis to model outputs over time. The relative importance of factors and their influence on outputs over time can  then be examined through this analysis.</p><pre><code class="language-julia hljs">tsa_s = ADRIA.sensitivity.tsa(rs, s_tac)
tsa_fig = ADRIA.viz.tsa(
    rs,
    tsa_s;
    opts,
    fig_opts
)
save(&quot;tsa.png&quot;, tsa_fig)</code></pre><p><img src="/ADRIA.jl/dev/assets/imgs/tsa.png?raw=true &quot;Temporal Sensitivity Analysis&quot;" alt="Plots of Temporal Sensitivities"/></p><h2 id="Regional-Sensitivity-Analysis"><a class="docs-heading-anchor" href="#Regional-Sensitivity-Analysis">Regional Sensitivity Analysis</a><a id="Regional-Sensitivity-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Regional-Sensitivity-Analysis" title="Permalink"></a></h2><p>Regional Sensitivity Analysis is a monte-carlo filtering approach. The aim of RSA is to aid in identifying which (group of) factors drive model outputs and their active areas of factor space.</p><pre><code class="language-julia hljs">tac_rs = ADRIA.sensitivity.rsa(rs, mean_s_tac; S=10)
rsa_fig = ADRIA.viz.rsa(
    rs,
    tac_rs,
    [&quot;n_adapt&quot;, &quot;wave_scenario&quot;, &quot;dhw_scenario&quot;, &quot;seed_TA&quot;, &quot;seed_CA&quot;, &quot;fogging&quot;, &quot;SRM&quot;];
    opts,
    fig_opts
)
save(&quot;rsa.png&quot;, rsa_fig)</code></pre><p><img src="/ADRIA.jl/dev/assets/imgs/rsa.png?raw=true &quot;Regional Sensitivity Analysis&quot;" alt="Plots of Regional Sensitivities"/></p><h2 id="Outcome-mapping"><a class="docs-heading-anchor" href="#Outcome-mapping">Outcome mapping</a><a id="Outcome-mapping-1"></a><a class="docs-heading-anchor-permalink" href="#Outcome-mapping" title="Permalink"></a></h2><p>A monte-carlo filtering approach similar to Regional Sensitivity Analysis.</p><p>As the name implies, outcome mapping aids in identifying the relationship between model outputs and the region of factor space that led to those outputs.</p><pre><code class="language-julia hljs">tf = Figure(resolution=(1600, 1200))  # resolution in pixels

# Indicate factor values that are in the top 50 percentile
tac_om_50 = ADRIA.sensitivity.outcome_map(rs, mean_s_tac, x -&gt; any(x .&gt;= 0.5); S=20)
ADRIA.viz.outcome_map!(
    tf[1, 1],
    rs,
    tac_om_50,
    [&quot;n_adapt&quot;, &quot;wave_scenario&quot;, &quot;dhw_scenario&quot;, &quot;seed_TA&quot;, &quot;seed_CA&quot;, &quot;fogging&quot;, &quot;SRM&quot;];
    axis_opts=Dict(:title =&gt; &quot;Regions which lead to Top 50th Percentile Outcomes&quot;, :ylabel =&gt; &quot;TAC [m²]&quot;)
)

# Indicate factor values that are in the top 30 percentile
tac_om_70 = ADRIA.sensitivity.outcome_map(rs, mean_s_tac, x -&gt; any(x .&gt;= 0.7); S=20)
ADRIA.viz.outcome_map!(
    tf[2, 1],
    rs,
    tac_om_70,
    [&quot;n_adapt&quot;, &quot;wave_scenario&quot;, &quot;dhw_scenario&quot;, &quot;seed_TA&quot;, &quot;seed_CA&quot;, &quot;fogging&quot;, &quot;SRM&quot;];
    axis_opts=Dict(:title =&gt; &quot;Regions which lead to Top 30th Percentile Outcomes&quot;, :ylabel =&gt; &quot;TAC [m²]&quot;))

save(&quot;outcome_map.png&quot;, tf)</code></pre><p><img src="/ADRIA.jl/dev/assets/imgs/outcome_map.png?raw=true &quot;Outcome mapping&quot;" alt="Outcome mapping"/></p><h2 id="GUI-for-high-level-exploration-(prototype-only!)"><a class="docs-heading-anchor" href="#GUI-for-high-level-exploration-(prototype-only!)">GUI for high-level exploration (prototype only!)</a><a id="GUI-for-high-level-exploration-(prototype-only!)-1"></a><a class="docs-heading-anchor-permalink" href="#GUI-for-high-level-exploration-(prototype-only!)" title="Permalink"></a></h2><pre><code class="language-julia hljs"># To explore results interactively
ADRIA.viz.explore(&quot;path to Result Set&quot;)

# or, if the result set is already loaded: 
# ADRIA.viz.explore(rs)</code></pre><p><img src="/ADRIA.jl/dev/assets/imgs/aviz_app.png?raw=true &quot;Data Exploration App&quot;" alt="Standalone app for data exploration"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../scenario_runs/">« Running scenarios</a><a class="docs-footer-nextpage" href="../scenario_discovery/">Scenario Discovery »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Tuesday 13 June 2023 01:30">Tuesday 13 June 2023</span>. Using Julia version 1.9.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
