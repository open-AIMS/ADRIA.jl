<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Inputs and Outputs · ADRIA.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="ADRIA.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ADRIA.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><a class="tocitem" href="../../synopsis/">Synopsis</a></li><li><span class="tocitem">Usage</span><ul><li><a class="tocitem" href="../../usage/getting_started/">Getting Started</a></li><li><a class="tocitem" href="../../usage/domain/">Loading a Domain</a></li><li><a class="tocitem" href="../../usage/scenario_generation/">Generating scenarios</a></li><li><a class="tocitem" href="../../usage/scenario_runs/">Running scenarios</a></li><li><a class="tocitem" href="../../usage/analysis/">Analysis</a></li><li><a class="tocitem" href="../../usage/cookbook/">Cookbook examples</a></li></ul></li><li><a class="tocitem" href="../../dMCDA/">Dynamic Multi-Criteria Decision Analysis</a></li><li><span class="tocitem">Architecture</span><ul><li><a class="tocitem" href="../architecture/">Architectural overview</a></li><li class="is-active"><a class="tocitem" href>Inputs and Outputs</a><ul class="internal"><li><a class="tocitem" href="#Domain-data-package"><span>Domain data package</span></a></li><li><a class="tocitem" href="#ResultSets"><span>ResultSets</span></a></li></ul></li></ul></li><li><span class="tocitem">Development</span><ul><li><a class="tocitem" href="../../development/development_setup/">Development setup</a></li><li><a class="tocitem" href="../../development/metrics/">Contributing a metric</a></li><li><a class="tocitem" href="../../development/release_guide/">Release Guide</a></li><li><a class="tocitem" href="../../development/building_docs/">Building Documentation</a></li></ul></li><li><a class="tocitem" href="../../API/">ADRIA API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Architecture</a></li><li class="is-active"><a href>Inputs and Outputs</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Inputs and Outputs</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/open-AIMS/ADRIA.jl/blob/main/docs/src/architecture/domain_and_resultsets.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Inputs-and-Outputs"><a class="docs-heading-anchor" href="#Inputs-and-Outputs">Inputs and Outputs</a><a id="Inputs-and-Outputs-1"></a><a class="docs-heading-anchor-permalink" href="#Inputs-and-Outputs" title="Permalink"></a></h1><p>ADRIA seeks to use <a href="https://specs.frictionlessdata.io/#what%E2%80%99s-a-data-package">Data Packages</a> to define a standard structure, format, and naming convention for its inputs and outputs. By definition, a Data Package is a directory holding the required data for ADRIA to run, or results from model runs.</p><p>Data specifications are outlined/stored in this repository: https://github.com/open-AIMS/ADRIA-data-specs</p><p>The overall structure and data formats of the data packages are illustrated in the diagram below.</p><p><img src="../assets/imgs/ADRIA_Input_Output_diagram.png?raw=true &quot;Domain-Results Diagram&quot;" alt="Domain-Results Diagram"/></p><h2 id="Domain-data-package"><a class="docs-heading-anchor" href="#Domain-data-package">Domain data package</a><a id="Domain-data-package-1"></a><a class="docs-heading-anchor-permalink" href="#Domain-data-package" title="Permalink"></a></h2><p>Prior to running the ADRIA coral ecosystem model, the first step (after importing the package) is to load domain data.</p><pre><code class="language-julia hljs">dom = ADRIA.load_domain(&quot;path to some domain&quot;)</code></pre><p>As the naming suggests, inputs are taken to represent a given spatial area, and so are referred to as a <code>Domain</code>.</p><p>The <code>Domain</code> data package consists of:</p><ul><li>Connectivity (CSVs, grouped by year)</li><li>Degree-Heating Week trajectories (in netCDF format; dimensions: timestep ⋅ location ⋅ projection)</li><li>Wave stress (as netCDFs; dimensions: timestep ⋅ location ⋅ projection)</li><li>Geospatial data</li><li>a <code>datapackage.json</code> file with machine-readable metadata</li><li>a <code>README.md</code> file with human-readable content</li></ul><p>Geospatial data consists of:</p><ul><li>polygons defining individual reefs/sites in <a href="https://www.geopackage.org/">geopackage format</a></li><li>initial coral cover (as a netCDF; with dimensions: species/sizes ⋅ locations)</li></ul><h3 id="ReefMod-Engine-datasets"><a class="docs-heading-anchor" href="#ReefMod-Engine-datasets">ReefMod Engine datasets</a><a id="ReefMod-Engine-datasets-1"></a><a class="docs-heading-anchor-permalink" href="#ReefMod-Engine-datasets" title="Permalink"></a></h3><p>Datasets intended for use with the ReefMod Engine (RME) can also be loaded for use with ADRIAmod. The RME represents larger spatial scales typically covering the entire Great Barrier Reef.</p><pre><code class="language-julia hljs">dom = ADRIA.load_domain(ReefModDomain, &quot;path to ReefMod Engine dataset&quot;, &quot;45&quot;)</code></pre><h3 id="Naming-conventions"><a class="docs-heading-anchor" href="#Naming-conventions">Naming conventions</a><a id="Naming-conventions-1"></a><a class="docs-heading-anchor-permalink" href="#Naming-conventions" title="Permalink"></a></h3><p>By convention, the directory name is typically the name of the reef or reef cluster. Where multiple datasets for the same spatial domain are expected, appending a unique suffix is recommended, such as the date of creation, such as &quot;Moore_2022-11-17&quot;.</p><p>The geopackage is expected to have the same filename as its Domain. For example, if the domain name is &quot;Example_domain&quot;, then the geopackage file should be named &quot;Example_domain.gpkg&quot;.</p><p>Degree-heating Week datasets must follow the convention of: <code>dhwRCP[NN].nc</code></p><p>Here, <code>[NN]</code> is to be replaced with the two digit RCP code that indicates which RCP scenario is represented by the given data cube. The following are examples of valid/expected filenames:</p><ul><li><code>dhwRCP26.nc</code></li><li><code>dhwRCP34.nc</code></li><li><code>dhwRCP45.nc</code></li><li><code>dhwRCP60.nc</code></li><li><code>dhwRCP70.nc</code></li><li><code>dhwRCP85.nc</code></li></ul><p>Similarly, below are examples of valid/expected wave stress filenames:</p><ul><li><code>wave_RCP26.nc</code></li><li><code>wave_RCP34.nc</code></li><li><code>wave_RCP45.nc</code></li><li><code>wave_RCP60.nc</code></li><li><code>wave_RCP70.nc</code></li><li><code>wave_RCP85.nc</code></li></ul><p>Below is a diagram indicating the directory layout</p><pre><code class="nohighlight hljs">Example_domain
│   datapackage.json
│   README.md
│
├───connectivity
│   ├───2015
│   │       connect_matrix_2015_1.csv
│   │       connect_matrix_2015_2.csv
│   │       connect_matrix_2015_3.csv
│   │
│   ├───2016
│   │       connect_matrix_2016_1.csv
│   │       connect_matrix_2016_2.csv
│   │       connect_matrix_2016_3.csv
│   │
│   └───2017
│           connect_matrix_2017_1.csv
│           connect_matrix_2017_2.csv
│           connect_matrix_2017_3.csv
│
├───DHWs
│       dhwRCP26.nc
│       dhwRCP45.nc
│       dhwRCP60.nc
│       dhwRCP85.nc
│
├───site_data
│       coral_cover.nc
│       Example_domain.gpkg
│
└───waves
        wave_RCP26.nc
        wave_RCP45.nc
        wave_RCP60.nc
        wave_RCP85.nc</code></pre><h2 id="ResultSets"><a class="docs-heading-anchor" href="#ResultSets">ResultSets</a><a id="ResultSets-1"></a><a class="docs-heading-anchor-permalink" href="#ResultSets" title="Permalink"></a></h2><p>The directory holding results is also treated as a data package referred to as a <code>ResultSet</code>. Scenario outcomes are written out to disk as they complete to a directory located in the user-defined <code>Output</code> directory (see <a href="architecture/@ref">Getting started</a>).</p><p>The directory name follows the convention of <code>[Domain Name]__[IDs of RCPs]__[date/time of run]</code>. For example: <code>Moore_2022-11-17__RCPs45_60__2023-01-01_19_00_00_000</code></p><p>The above example <code>ResultSet</code> indicates the &quot;Moore_2022-11-17&quot; Domain was run for RCPs 4.5 and 6.0 at precisely 7pm (i.e., 19:00:00.000, where the trailing &quot;000&quot; indicates milliseconds). Note that each &quot;portion&quot; of information is separated by a double underscore (<code>__</code>).</p><p>Simulation results are stored in <a href="https://zarr.readthedocs.io/en/stable/spec/v2.html">Zarr format</a>. A <code>ResultSet</code> also holds a copy of:</p><ul><li>the scenario specifications</li><li>the geospatial data used</li><li>Summary statistics for the DHW/wave scenarios run, and</li><li>Logs indicating which locations were intervened on</li></ul><p>Below is a diagram of the directory structure. Filenames are not shown here as there may be hundreds/thousands depending on the scenario set run.</p><pre><code class="nohighlight hljs">Example_domain__RCP45_60_85__2023-03-11_19_00_00_000
├───env_stats
│   ├───dhw
│   │   ├───45
│   │   ├───60
│   │   └───85
│   └───wave
│       ├───45
│       ├───60
│       └───85
├───inputs
├───logs
│   ├───fog
│   ├───rankings
│   ├───seed
│   └───shade
├───model_spec
├───results
│   ├───absolute_shelter_volume
│   ├───relative_juveniles
│   ├───relative_shelter_volume
│   ├───relative_taxa_cover
│   └───total_absolute_cover
└───site_data</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../architecture/">« Architectural overview</a><a class="docs-footer-nextpage" href="../../development/development_setup/">Development setup »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Tuesday 5 September 2023 12:07">Tuesday 5 September 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
